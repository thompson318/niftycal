#/*============================================================================
#
#  NiftyCal: A software package for camera calibration.
#
#  Copyright (c) University College London (UCL). All rights reserved.
#
#  This software is distributed WITHOUT ANY WARRANTY; without even
#  the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
#  PURPOSE.
#
#  See LICENSE.txt in the top level directory for details.
#
#============================================================================*/

set (CTEST_EXTRA_COVERAGE_GLOB ${CTEST_EXTRA_COVERAGE_GLOB})
foreach (E IN ITEMS .c .cxx .h .txx)
  list (APPEND CTEST_EXTRA_COVERAGE_GLOB
    "Code/*/*${E}"
)
endforeach ()

set(CTEST_CUSTOM_COVERAGE_EXCLUDE
  ${CTEST_CUSTOM_COVERAGE_EXCLUDE}

  # Exclude try_compile sources from coverage results:
  ".*/CMakeFiles/CMakeTmp/.*"

  # Exclude files generated by the moc pre-compiler
  ".*/moc_.*"

  # Exclude files generated by the uic pre-compiler
  ".*/ui_.*"

  # Exclude files from the External directories
  "${EP_BASE}/[^/]*/[0-9a-f]*/src/.*"

  # Trac 2223: Remove these from coverage
  ".*/Testing/Code/.*"             # As we want to measure the coverage of real code, not tests.
  ".*/NVAPI/glew/.*"               # As Third Party Lib
  ".*/Code/Applications/.*"        # As finished apps, not specific classes
  ".*/Code/Gui/MITK/Apps/.*"       # As finished apps, not specific classes
  ".*/Code/Gui/MITK/HelperApps/.*" # As finished apps, not specific classes 
  )

# The following tests should not be run under valgrind
set(CTEST_CUSTOM_MEMCHECK_IGNORE
  
  )

set(CTEST_CUSTOM_ERROR_MATCH
  ${CTEST_CUSTOM_ERROR_MATCH}
  "CMake Error[ :]"
  )

set(CTEST_CUSTOM_WARNING_MATCH
  ${CTEST_CUSTOM_WARNING_MATCH}
  "CMake Warning[ :]"
  )

set(CTEST_CUSTOM_WARNING_EXCEPTION
  ${CTEST_CUSTOM_WARNING_EXCEPTION}
  
  # kwstyle suppressions
  "[Kk][Ww][Ss]tyle.*kws.*cxx"
  "[Kk][Ww][Ss]tyle.*kws.*h"
  "[Kk][Ww][Ss]tyle.*metaCommand.*cxx"

  # vtk suppressions
  "vtkfreetype"
  "Utilities.vtktiff"
  "VTK.*IO.vtkMySQLQuery.cxx"
  "VTK.*Utilities.vtkexodus2"
  "VTK.*Utilities.vtklibproj"
  "VTK.*Utilities.vtksqlite"
  "VTK.*Utilities.vtkmetaio"
  "VTK.*warn_unused_result"
  "VTK.*Filtering.*cxx"
  "VTK.*IO.*cxx"
  "VTK.*Infovis.*cxx"

  # qt suppressions from vtk...
  # Some VTK dashboards include building bits of Qt which produce lots of
  # the following warnings when built with the MS compilers. Qt guys should
  # fix their code. Until they do, keep the Qt chatter off the VTK dashboard
  # results:
  "include.[Qq]t([Cc]ore|[Gg]ui).*warning C4127: conditional expression is constant"
  "[Qq]t.*h.*warning.*declaration of .* shadows a member of .this"
  "[Qq]t.*h.*warning.*(copy constructor|assignment operator) could not be generated"  

  # Suppress warning caused when QT 'foreach' loops are combined
  ".*warning: declaration of '_container_' shadows a previous local"

  # Trac #1277 Suppress Qt warnings on Lion
  ".*[Qq][Gg]lobal.h.*warning.*This version of Mac OS X is unsupported.*"
  
  # Trac #1277 Suppress itk::hash warning (windows).
  ".*itk::hash.*type name first seen using.*now using struct.*" 
  
  # Trac #1277 suppress gdcmWin32.h warnings
  ".*gdcmWin32.h.*" 
  
  # Trac #1405, various suppressions.
  ".*itkBlockMatchingMethod.*variable.*set but not used.*" 
  ".*itkBSplineTransform.txx.*variable.*set but not used.*" 
  ".*itkIndex.*warning: array subscript is above array bounds.*"
  ".*warning C4099: 'itk::hash<key>' : type name first seen using 'class' now seen using 'struct'.*"
  ".*Source.*MITK.*" 
  
  # Trac #1455, various suppressions:
  # Trac #1455: Sometimes we set values, and output them only in debug code. 
  # Seems a shame to delete the debug code just to get rid of the warning.
  ".*variable.*set but not used.*"
  "${EP_BASE}/[^/]*/[0-9a-f]*/src/.*"
  ".*itkMIDASMorphologicalSegmentorLargestConnectedComponentImageFilter.txx:144.*imgSize.*"
  
  # PythonQt suppressions
  "PythonQt.*src.*PythonQt.*(cpp|h)"
  "include.PythonQt.PythonQt.*h"

  # Suppressing warnings about duplicate libraries in Darwin
  # At some point this may be addressed by CMake feature request:
  # http://public.kitware.com/Bug/view.php?id=10179
  "ld: warning: duplicate dylib.*"
  
  # Visual studio spurious warnings...
  "The following environment variables were not found"
  
  # Trac #1639
  ".*itkBlockMatchingMethod.txx.*"
  ".*itkBSplineTransform.txx.*"
  
  # Trac 1720 - fix warnings from doxygen
  ".*ignoring unsupported tag.*doygen.*"

  # Trac 1860 - turn of external NiftyReg, NiftySeg package warnings etc.
  ".*NiftyReg.*"
  ".*NiftySeg.*"
  ".*NiftyRec.*"
  ".*NiftySim.*"
  ".*NIFTYLINK.*"
  ".*OPENIGTLINK.*"
  ".*niftyreg.*"
  ".*niftyseg.*"
  ".*niftyrec.*"
  ".*niftysim.*"
  ".*niftylink.*"
  ".*openigtlink.*"
  
  # Trac 2137: Tidying dashboard
  "OpenCV/.*/build"
  "itk.*Point.*may be used uninitialized in this function" 
  "itk.*Index.*may be used uninitialized in this function"
  "itk.*Vector.*may be used uninitialized in this function"
  "itk.*Size.*may be used uninitialized in this function"
  
  # Trac 2254: Tidying dashboard
  "itk.*FixedArray.*may be used uninitialized in this function"

  # Trac 2332: Tidying dashboard
  ".*itk.*FixedArray.*is used uninitialized in this function.*"
  "${EP_BASE}/CTK/[0-9a-f]*/src/.*"
  "${EP_BASE}/DCMTK/[0-9a-f]*/src/.*"
  "${EP_BASE}/OpenCV/[0-9a-f]*/src/.*"

  # Trac 2495: Removing warning for Kelvin
  ".*itkShapeBasedAveragingImageFilter.*"
  )
